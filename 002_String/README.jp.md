# String

## Stringとは

Stringは文字列を表し、厳密にはunicode文字の配列で構成されている<br>

## Stringの比較
Stringには比較するための機能が備わっている<br>
例えば以下のような比較演算子があるが、これには問題がある
~~~text
String == String
~~~
問題があるかどうかは「operator overloading（利用者定義演算子）」を提供しているかどうかで判断する<br>
例えばC++のような言語の場合は利用者定義演算子を提供しているため、「==」での比較が可能<br>
しかし、Javaのような言語の場合は利用者定義演算子を提供していないため、「==」での比較が出来ない<br>
※Javaで上記の比較演算子を使用した場合は、二つのオブジェクトが同一かを判断する

## Immutable（不変） or Mutable（可変）

Immutableの文字列は初期化時以外に文字の修正をすることが出来ない<br>
C++の場合はMutableのため、一度初期化した文字列を再度修正する事が出来る<br>
JavaやPythonの場合はImutableのため、一度初期化した文字列は修正する事が出来ない

~~~python
    string = "Hello World"

    string[5] = ','

    print(string)
~~~
上記のように文字列を修正しようとすると以下のようなエラーになる
~~~python
        string[5] = ','
    TypeError: 'str' object does not support item assignment
~~~

### Immutable（不変）について

ImmutableなStringの値は修正できないが、実装上以下のような記述する事で修正できているようにも見える

~~~python
    string = "Hello World"

    string = "こんにちは 世界"

    print(string)
~~~
実行結果
~~~python
    こんにちは 世界
~~~

しかし、これは見かけでは変更されているが内部的には文字列の修正は行われていない<br>
まず、文字列が定義された際に内部的には**ヒープ領域**に実際に値を入れ、**スタック領域**に参照する値を入れている<br>
そのうえで上記のような実装で新しい文字列を代入すると、ヒップ領域に新たな文字列が格納され、そこに対する参照値をスタック領域で確保する。つまり元の文字列を修正はしていない<br>
だからこそ、Imutableな文字列は修正ができない。と言われてる<br>
また、もしヒープ領域に代入しようとしている文字列が既にある場合は基本的には別途作成されることはなく、再利用するように同じスタック領域/ヒープ領域を再利用する<br>
※new を使用したりすると新しい参照を作成する事になるので、上記の限りではない<br>
そのため、文字列への代入はそれだけメモリを圧迫する事になるため注意が必要<br>
TODO：文字列結合をする場合もImutableの場合は元の文字列をコピーして新規作成する関係上、時間計算量が多くなる（O（N2））となるためStringBuilderなどを使用する必要がある

